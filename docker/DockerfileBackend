FROM python:3.12

RUN pip install poetry
RUN poetry config virtualenvs.create false

WORKDIR jardinier-backend/
COPY ../jardinier-backend/pyproject.toml ../jardinier-backend/poetry.lock ./

RUN poetry install --no-root

COPY ../jardinier-backend/src /jardinier-backend/src
EXPOSE 5000

WORKDIR ./src
CMD ["poetry", "run", "python", "main.py"]
